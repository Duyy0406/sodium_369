{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///home/fcs/sodium/frontend/frontend/instrumentation.node.ts"],"sourcesContent":["/* eslint-disable no-console */\nimport { diag, DiagConsoleLogger, DiagLogLevel } from '@opentelemetry/api';\nimport { getNodeAutoInstrumentations } from '@opentelemetry/auto-instrumentations-node';\nimport { OTLPMetricExporter } from '@opentelemetry/exporter-metrics-otlp-proto';\nimport { OTLPTraceExporter } from '@opentelemetry/exporter-trace-otlp-http';\nimport { Resource } from '@opentelemetry/resources';\nimport {\n  PeriodicExportingMetricReader,\n  ConsoleMetricExporter,\n} from '@opentelemetry/sdk-metrics';\nimport { NodeSDK } from '@opentelemetry/sdk-node';\nimport { SimpleSpanProcessor } from '@opentelemetry/sdk-trace-node';\nimport { SEMRESATTRS_SERVICE_NAME, SEMRESATTRS_SERVICE_VERSION, SEMRESATTRS_SERVICE_INSTANCE_ID } from '@opentelemetry/semantic-conventions';\n\ndiag.setLogger(new DiagConsoleLogger(), DiagLogLevel.INFO);\n\nconst traceExporter = new OTLPTraceExporter();\n\nconst sdk = new NodeSDK({\n  resource: new Resource({\n    [SEMRESATTRS_SERVICE_NAME]: 'blockscout_frontend',\n    [SEMRESATTRS_SERVICE_VERSION]: process.env.NEXT_PUBLIC_GIT_TAG || process.env.NEXT_PUBLIC_GIT_COMMIT_SHA || 'unknown_version',\n    [SEMRESATTRS_SERVICE_INSTANCE_ID]:\n        process.env.NEXT_PUBLIC_APP_INSTANCE ||\n        process.env.NEXT_PUBLIC_APP_HOST?.replace('.blockscout.com', '').replaceAll('-', '_') ||\n        'unknown_app',\n  }),\n  spanProcessor: new SimpleSpanProcessor(traceExporter),\n  traceExporter,\n  metricReader: new PeriodicExportingMetricReader({\n    exporter:\n      process.env.NODE_ENV === 'production' ?\n        new OTLPMetricExporter() :\n        new ConsoleMetricExporter(),\n  }),\n  instrumentations: [\n    getNodeAutoInstrumentations({\n      '@opentelemetry/instrumentation-http': {\n        ignoreIncomingRequestHook: (request) => {\n          try {\n            if (!request.url) {\n              return false;\n            }\n            const url = new URL(request.url, `http://${ request.headers.host }`);\n            if (\n              url.pathname.startsWith('/_next/static/') ||\n              url.pathname.startsWith('/_next/data/') ||\n              url.pathname.startsWith('/assets/') ||\n              url.pathname.startsWith('/static/')\n            ) {\n              return true;\n            }\n          } catch (error) {}\n          return false;\n        },\n      },\n    }),\n  ],\n});\n\nif (process.env.OTEL_SDK_ENABLED) {\n  sdk.start();\n\n  process.on('SIGTERM', () => {\n    sdk\n      .shutdown()\n      .then(() => console.log('Tracing terminated'))\n      .catch((error) => console.log('Error terminating tracing', error))\n      .finally(() => process.exit(0));\n  });\n}\n"],"names":[],"mappings":"AAAA,6BAA6B;AAC7B;AACA;AAEA;AACA;AACA;AAAA;AAIA;AACA;AACA;;;;;;;;;;AAEA,qIAAA,CAAA,OAAI,CAAC,SAAS,CAAC,IAAI,qIAAA,CAAA,oBAAiB,IAAI,qIAAA,CAAA,eAAY,CAAC,IAAI;AAEzD,MAAM,gBAAgB,IAAI,0OAAA,CAAA,oBAAiB;AAE3C,MAAM,MAAM,IAAI,qJAAA,CAAA,UAAO,CAAC;IACtB,UAAU,IAAI,qLAAA,CAAA,WAAQ,CAAC;QACrB,CAAC,iOAAA,CAAA,2BAAwB,CAAC,EAAE;QAC5B,CAAC,iOAAA,CAAA,8BAA2B,CAAC,EAAE,8FAA6E;QAC5G,CAAC,iOAAA,CAAA,kCAA+B,CAAC,EAC7B,QAAQ,GAAG,CAAC,wBAAwB,mDACF,QAAQ,mBAAmB,IAAI,WAAW,KAAK,QACjF;IACN;IACA,eAAe,IAAI,6LAAA,CAAA,sBAAmB,CAAC;IACvC;IACA,cAAc,IAAI,yNAAA,CAAA,gCAA6B,CAAC;QAC9C,UACE,6EAEE,IAAI,iNAAA,CAAA,wBAAqB;IAC/B;IACA,kBAAkB;QAChB,CAAA,GAAA,+LAAA,CAAA,8BAA2B,AAAD,EAAE;YAC1B,uCAAuC;gBACrC,2BAA2B,CAAC;oBAC1B,IAAI;wBACF,IAAI,CAAC,QAAQ,GAAG,EAAE;4BAChB,OAAO;wBACT;wBACA,MAAM,MAAM,IAAI,IAAI,QAAQ,GAAG,EAAE,CAAC,OAAO,EAAG,QAAQ,OAAO,CAAC,IAAI,EAAG;wBACnE,IACE,IAAI,QAAQ,CAAC,UAAU,CAAC,qBACxB,IAAI,QAAQ,CAAC,UAAU,CAAC,mBACxB,IAAI,QAAQ,CAAC,UAAU,CAAC,eACxB,IAAI,QAAQ,CAAC,UAAU,CAAC,aACxB;4BACA,OAAO;wBACT;oBACF,EAAE,OAAO,OAAO,CAAC;oBACjB,OAAO;gBACT;YACF;QACF;KACD;AACH;AAEA,IAAI,QAAQ,GAAG,CAAC,gBAAgB,EAAE;IAChC,IAAI,KAAK;IAET,QAAQ,EAAE,CAAC,WAAW;QACpB,IACG,QAAQ,GACR,IAAI,CAAC,IAAM,QAAQ,GAAG,CAAC,uBACvB,KAAK,CAAC,CAAC,QAAU,QAAQ,GAAG,CAAC,6BAA6B,QAC1D,OAAO,CAAC,IAAM,QAAQ,IAAI,CAAC;IAChC;AACF","debugId":null}}]
}